# åŒ–å¦†å“å®˜ç½‘ä¸åå°ç®¡ç†ç³»ç»Ÿéœ€æ±‚æ–‡æ¡£ (4/8)

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„è®¾è®¡

### 1. æŠ€æœ¯æ ˆé€‰å‹

#### 1.1 å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Vue 3** | ^3.4.0 | æ ¸å¿ƒæ¡†æ¶ï¼Œé‡‡ç”¨Composition API |
| **Vite** | ^5.0.0 | æ„å»ºå·¥å…·ï¼Œå¿«é€Ÿå†·å¯åŠ¨ |
| **TypeScript** | ^5.3.0 | ç±»å‹ç³»ç»Ÿï¼Œæå‡ä»£ç è´¨é‡ |
| **Pinia** | ^2.1.0 | çŠ¶æ€ç®¡ç† |
| **Element Plus** | ^2.5.0 | UIç»„ä»¶åº“ï¼ˆåå°ï¼‰ |
| **Vue Router** | ^4.2.0 | è·¯ç”±ç®¡ç† |
| **Axios** | ^1.6.0 | HTTPå®¢æˆ·ç«¯ |
| **ECharts** | ^5.4.0 | æ•°æ®å¯è§†åŒ– |
| **TailwindCSS** | ^3.4.0 | åŸå­åŒ–CSSï¼ˆå‰å°ï¼‰ |
| **VueUse** | ^10.7.0 | Vueç»„åˆå¼å·¥å…·é›† |
| **Day.js** | ^1.11.0 | æ—¥æœŸå¤„ç† |
| **Lodash-es** | ^4.17.0 | å·¥å…·å‡½æ•°åº“ |

#### 1.2 åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| **Node.js** | ^20.0.0 | è¿è¡Œç¯å¢ƒ |
| **Express** | ^4.18.0 | Webæ¡†æ¶ |
| **TypeScript** | ^5.3.0 | ç±»å‹ç³»ç»Ÿ |
| **Prisma** | ^5.8.0 | ORMå·¥å…· |
| **PostgreSQL** | ^16.0 | å…³ç³»å‹æ•°æ®åº“ |
| **Redis** | ^7.2.0 | ç¼“å­˜/ä¼šè¯å­˜å‚¨ |
| **JWT** | ^9.0.0 | èº«ä»½è®¤è¯ |
| **Bcrypt** | ^5.1.0 | å¯†ç åŠ å¯† |
| **Multer** | ^1.4.0 | æ–‡ä»¶ä¸Šä¼  |
| **Nodemailer** | ^6.9.0 | é‚®ä»¶å‘é€ |
| **Winston** | ^3.11.0 | æ—¥å¿—ç®¡ç† |

#### 1.3 å¼€å‘å·¥å…·

| å·¥å…· | ç”¨é€” |
|------|------|
| **ESLint** | ä»£ç æ£€æŸ¥ |
| **Prettier** | ä»£ç æ ¼å¼åŒ– |
| **Husky** | Gité’©å­ |
| **Commitlint** | æäº¤ä¿¡æ¯è§„èŒƒ |
| **Jest** | å•å…ƒæµ‹è¯• |
| **Playwright** | E2Eæµ‹è¯• |

---

### 2. é¡¹ç›®ç»“æ„è®¾è®¡

#### 2.1 Monorepoç»“æ„

```
cosmetics-platform/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ frontend/              # å‰å°å®˜ç½‘
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ assets/        # é™æ€èµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ components/    # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ views/         # é¡µé¢è§†å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ router/        # è·¯ç”±é…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/        # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ api/           # APIæ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ types/         # TypeScriptç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ styles/        # å…¨å±€æ ·å¼
â”‚   â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â”œâ”€â”€ admin/                 # åå°ç®¡ç†ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â”œâ”€â”€ App.vue
â”‚   â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ server/                # åç«¯æœåŠ¡
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ controllers/   # æ§åˆ¶å™¨
â”‚       â”‚   â”œâ”€â”€ services/      # ä¸šåŠ¡é€»è¾‘
â”‚       â”‚   â”œâ”€â”€ models/        # æ•°æ®æ¨¡å‹
â”‚       â”‚   â”œâ”€â”€ middlewares/   # ä¸­é—´ä»¶
â”‚       â”‚   â”œâ”€â”€ routes/        # è·¯ç”±
â”‚       â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚       â”‚   â”œâ”€â”€ types/         # ç±»å‹å®šä¹‰
â”‚       â”‚   â”œâ”€â”€ config/        # é…ç½®æ–‡ä»¶
â”‚       â”‚   â””â”€â”€ index.ts       # å…¥å£æ–‡ä»¶
â”‚       â”œâ”€â”€ prisma/
â”‚       â”‚   â””â”€â”€ schema.prisma  # æ•°æ®åº“æ¨¡å‹
â”‚       â”œâ”€â”€ tests/             # æµ‹è¯•æ–‡ä»¶
â”‚       â”œâ”€â”€ tsconfig.json
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ packages/                  # å…±äº«åŒ…
â”‚   â”œâ”€â”€ shared/                # å…±äº«ä»£ç 
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ types/         # å…±äº«ç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ constants/     # å¸¸é‡
â”‚   â”‚   â”‚   â””â”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”‚
â”‚   â””â”€â”€ ui/                    # UIç»„ä»¶åº“
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ tsconfig.json
â”‚       â””â”€â”€ package.json
â”‚
â”œâ”€â”€ .github/                   # GitHubé…ç½®
â”‚   â””â”€â”€ workflows/             # CI/CDå·¥ä½œæµ
â”‚       â””â”€â”€ deploy.yml
â”‚
â”œâ”€â”€ .husky/                    # Gité’©å­
â”œâ”€â”€ .vscode/                   # VSCodeé…ç½®
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .prettierrc
â”œâ”€â”€ .eslintrc.js
â”œâ”€â”€ pnpm-workspace.yaml
â”œâ”€â”€ turbo.json
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

#### 2.2 å‰ç«¯ç›®å½•è¯¦ç»†ç»“æ„

```
frontend/src/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ images/               # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ icons/                # å›¾æ ‡
â”‚   â”œâ”€â”€ fonts/                # å­—ä½“
â”‚   â””â”€â”€ videos/               # è§†é¢‘
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ common/               # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Header.vue
â”‚   â”‚   â”œâ”€â”€ Footer.vue
â”‚   â”‚   â”œâ”€â”€ Navigation.vue
â”‚   â”‚   â””â”€â”€ SearchBar.vue
â”‚   â”œâ”€â”€ product/              # äº§å“ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ProductCard.vue
â”‚   â”‚   â”œâ”€â”€ ProductList.vue
â”‚   â”‚   â”œâ”€â”€ ProductFilter.vue
â”‚   â”‚   â””â”€â”€ ProductGallery.vue
â”‚   â”œâ”€â”€ cart/                 # è´­ç‰©è½¦ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ CartItem.vue
â”‚   â”‚   â”œâ”€â”€ CartSummary.vue
â”‚   â”‚   â””â”€â”€ MiniCart.vue
â”‚   â””â”€â”€ user/                 # ç”¨æˆ·ç›¸å…³ç»„ä»¶
â”‚       â”œâ”€â”€ LoginForm.vue
â”‚       â”œâ”€â”€ RegisterForm.vue
â”‚       â””â”€â”€ UserAvatar.vue
â”‚
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ home/                 # é¦–é¡µ
â”‚   â”‚   â””â”€â”€ Index.vue
â”‚   â”œâ”€â”€ products/             # äº§å“é¡µ
â”‚   â”‚   â”œâ”€â”€ List.vue
â”‚   â”‚   â””â”€â”€ Detail.vue
â”‚   â”œâ”€â”€ cart/                 # è´­ç‰©è½¦
â”‚   â”‚   â””â”€â”€ Index.vue
â”‚   â”œâ”€â”€ checkout/             # ç»“ç®—
â”‚   â”‚   â”œâ”€â”€ Index.vue
â”‚   â”‚   â””â”€â”€ Payment.vue
â”‚   â”œâ”€â”€ user/                 # ç”¨æˆ·ä¸­å¿ƒ
â”‚   â”‚   â”œâ”€â”€ Index.vue
â”‚   â”‚   â”œâ”€â”€ Profile.vue
â”‚   â”‚   â”œâ”€â”€ Orders.vue
â”‚   â”‚   â”œâ”€â”€ Favorites.vue
â”‚   â”‚   â””â”€â”€ Coupons.vue
â”‚   â”œâ”€â”€ about/                # å…³äºæˆ‘ä»¬
â”‚   â”‚   â””â”€â”€ Index.vue
â”‚   â””â”€â”€ service/              # å®¢æˆ·æœåŠ¡
â”‚       â””â”€â”€ Index.vue
â”‚
â”œâ”€â”€ router/
â”‚   â”œâ”€â”€ index.ts              # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ guards.ts             # è·¯ç”±å®ˆå«
â”‚
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ user.ts               # ç”¨æˆ·çŠ¶æ€
â”‚   â”œâ”€â”€ cart.ts               # è´­ç‰©è½¦çŠ¶æ€
â”‚   â”œâ”€â”€ product.ts            # äº§å“çŠ¶æ€
â”‚   â””â”€â”€ app.ts                # åº”ç”¨çŠ¶æ€
â”‚
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ index.ts              # APIå®ä¾‹
â”‚   â”œâ”€â”€ user.ts               # ç”¨æˆ·API
â”‚   â”œâ”€â”€ product.ts            # äº§å“API
â”‚   â”œâ”€â”€ order.ts              # è®¢å•API
â”‚   â””â”€â”€ common.ts             # å…¬å…±API
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ request.ts            # è¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ storage.ts            # æœ¬åœ°å­˜å‚¨
â”‚   â”œâ”€â”€ format.ts             # æ ¼å¼åŒ–å·¥å…·
â”‚   â”œâ”€â”€ validate.ts           # éªŒè¯å·¥å…·
â”‚   â””â”€â”€ constants.ts          # å¸¸é‡å®šä¹‰
â”‚
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ user.ts
â”‚   â”œâ”€â”€ product.ts
â”‚   â”œâ”€â”€ order.ts
â”‚   â””â”€â”€ common.ts
â”‚
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ variables.scss        # å˜é‡
â”‚   â”œâ”€â”€ mixins.scss           # æ··å…¥
â”‚   â”œâ”€â”€ reset.scss            # é‡ç½®æ ·å¼
â”‚   â””â”€â”€ global.scss           # å…¨å±€æ ·å¼
â”‚
â”œâ”€â”€ App.vue
â””â”€â”€ main.ts
```

---

### 3. ç³»ç»Ÿæ¶æ„è®¾è®¡

#### 3.1 æ•´ä½“æ¶æ„å›¾

```
                    [ç”¨æˆ·ç«¯]
                       â†“
              [CDN / Vercel Edge]
                       â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“                           â†“
   [å‰å°å®˜ç½‘]                   [åå°ç®¡ç†]
   (Vue3 SSR)                  (Vue3 SPA)
         â†“                           â†“
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
                 [API Gateway]
                  (Express)
                       â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“             â†“             â†“
   [ä¸šåŠ¡æœåŠ¡å±‚]   [è®¤è¯æœåŠ¡]   [æ–‡ä»¶æœåŠ¡]
         â†“             â†“             â†“
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“             â†“             â†“
   [PostgreSQL]    [Redis]      [OSS/S3]
   (ä¸»æ•°æ®åº“)    (ç¼“å­˜/ä¼šè¯)   (æ–‡ä»¶å­˜å‚¨)
```

#### 3.2 å‰ç«¯æ¶æ„

**æŠ€æœ¯æ¶æ„**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Presentation Layer          â”‚
â”‚   (Vue Components / Composition API)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          State Management           â”‚
â”‚         (Pinia Stores)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Business Logic             â”‚
â”‚      (Services / Composables)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Data Access Layer          â”‚
â”‚         (API Modules / Axios)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Utility Layer              â”‚
â”‚    (Utils / Helpers / Constants)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è·¯ç”±è®¾è®¡**ï¼š

```typescript
// router/index.ts
const routes = [
  {
    path: '/',
    name: 'Home',
    component: () => import('@/views/home/Index.vue'),
    meta: { title: 'é¦–é¡µ' }
  },
  {
    path: '/products',
    name: 'Products',
    component: () => import('@/views/products/List.vue'),
    meta: { title: 'äº§å“ä¸­å¿ƒ' }
  },
  {
    path: '/products/:id',
    name: 'ProductDetail',
    component: () => import('@/views/products/Detail.vue'),
    meta: { title: 'äº§å“è¯¦æƒ…' }
  },
  {
    path: '/cart',
    name: 'Cart',
    component: () => import('@/views/cart/Index.vue'),
    meta: { title: 'è´­ç‰©è½¦', requiresAuth: false }
  },
  {
    path: '/checkout',
    name: 'Checkout',
    component: () => import('@/views/checkout/Index.vue'),
    meta: { title: 'ç¡®è®¤è®¢å•', requiresAuth: true }
  },
  {
    path: '/user',
    name: 'User',
    component: () => import('@/views/user/Index.vue'),
    meta: { title: 'ç”¨æˆ·ä¸­å¿ƒ', requiresAuth: true },
    children: [
      {
        path: 'profile',
        name: 'UserProfile',
        component: () => import('@/views/user/Profile.vue'),
        meta: { title: 'ä¸ªäººèµ„æ–™' }
      },
      {
        path: 'orders',
        name: 'UserOrders',
        component: () => import('@/views/user/Orders.vue'),
        meta: { title: 'æˆ‘çš„è®¢å•' }
      }
    ]
  }
];
```

#### 3.3 åç«¯æ¶æ„

**åˆ†å±‚æ¶æ„**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Controller Layer            â”‚
â”‚   (Request/Response Handling)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Service Layer              â”‚
â”‚      (Business Logic)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Repository Layer           â”‚
â”‚      (Data Access / ORM)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          Database Layer             â”‚
â”‚      (PostgreSQL / Redis)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**APIè®¾è®¡åŸåˆ™**ï¼š

```
RESTful API è§„èŒƒï¼š
GET    /api/products        è·å–äº§å“åˆ—è¡¨
GET    /api/products/:id    è·å–äº§å“è¯¦æƒ…
POST   /api/products        åˆ›å»ºäº§å“
PUT    /api/products/:id    æ›´æ–°äº§å“
DELETE /api/products/:id    åˆ é™¤äº§å“

ç»Ÿä¸€å“åº”æ ¼å¼ï¼š
{
  "code": 200,
  "message": "success",
  "data": { ... },
  "timestamp": 1704067200000
}

é”™è¯¯å“åº”æ ¼å¼ï¼š
{
  "code": 400,
  "message": "å‚æ•°é”™è¯¯",
  "error": "è¯¦ç»†é”™è¯¯ä¿¡æ¯",
  "timestamp": 1704067200000
}
```

---

### 4. æ•°æ®æµè®¾è®¡

#### 4.1 å‰ç«¯æ•°æ®æµ

```
User Action
    â†“
Component Event
    â†“
Store Action (Pinia)
    â†“
API Request (Axios)
    â†“
Backend API
    â†“
Response Data
    â†“
Store Update
    â†“
Component Re-render
```

#### 4.2 çŠ¶æ€ç®¡ç†è®¾è®¡

```typescript
// stores/user.ts
import { defineStore } from 'pinia';

export const useUserStore = defineStore('user', {
  state: () => ({
    userInfo: null as UserInfo | null,
    token: '',
    isLoggedIn: false
  }),

  getters: {
    userId: (state) => state.userInfo?.id,
    nickname: (state) => state.userInfo?.nickname || 'æ¸¸å®¢'
  },

  actions: {
    async login(credentials: LoginForm) {
      const { data } = await api.user.login(credentials);
      this.token = data.token;
      this.userInfo = data.userInfo;
      this.isLoggedIn = true;
      localStorage.setItem('token', data.token);
    },

    async logout() {
      await api.user.logout();
      this.token = '';
      this.userInfo = null;
      this.isLoggedIn = false;
      localStorage.removeItem('token');
    }
  }
});
```

---

### 5. æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ

#### 5.1 å‰ç«¯ä¼˜åŒ–

**ä»£ç åˆ†å‰²**ï¼š
```typescript
// è·¯ç”±æ‡’åŠ è½½
const ProductDetail = () => import('@/views/products/Detail.vue');

// ç»„ä»¶æ‡’åŠ è½½
const HeavyComponent = defineAsyncComponent(() =>
  import('@/components/HeavyComponent.vue')
);
```

**èµ„æºä¼˜åŒ–**ï¼š
- å›¾ç‰‡æ‡’åŠ è½½ï¼ˆIntersection Observerï¼‰
- å›¾ç‰‡æ ¼å¼ä¼˜åŒ–ï¼ˆWebPï¼‰
- CDNåŠ é€Ÿ
- Gzipå‹ç¼©
- Tree Shaking

**ç¼“å­˜ç­–ç•¥**ï¼š
- Service Workerç¼“å­˜é™æ€èµ„æº
- LocalStorageç¼“å­˜ç”¨æˆ·æ•°æ®
- APIå“åº”ç¼“å­˜ï¼ˆCache-Controlï¼‰

#### 5.2 åç«¯ä¼˜åŒ–

**æ•°æ®åº“ä¼˜åŒ–**ï¼š
- ç´¢å¼•ä¼˜åŒ–
- æŸ¥è¯¢ä¼˜åŒ–
- è¿æ¥æ± ç®¡ç†
- è¯»å†™åˆ†ç¦»

**ç¼“å­˜ç­–ç•¥**ï¼š
```typescript
// Redisç¼“å­˜ç¤ºä¾‹
async getProductDetail(id: string) {
  const cacheKey = `product:${id}`;

  // å…ˆæŸ¥ç¼“å­˜
  const cached = await redis.get(cacheKey);
  if (cached) return JSON.parse(cached);

  // æŸ¥è¯¢æ•°æ®åº“
  const product = await prisma.product.findUnique({ where: { id } });

  // å†™å…¥ç¼“å­˜ï¼ˆ1å°æ—¶è¿‡æœŸï¼‰
  await redis.setex(cacheKey, 3600, JSON.stringify(product));

  return product;
}
```

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0*
*ä¸‹ä¸€éƒ¨åˆ†ï¼šæ•°æ®åº“è®¾è®¡*
