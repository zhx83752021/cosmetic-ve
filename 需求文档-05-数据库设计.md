# åŒ–å¦†å“å®˜ç½‘ä¸åå°ç®¡ç†ç³»ç»Ÿéœ€æ±‚æ–‡æ¡£ (5/8)

## ğŸ’¾ æ•°æ®åº“è®¾è®¡

### 1. æ•°æ®åº“é€‰å‹

**ä¸»æ•°æ®åº“**: PostgreSQL 16.0
**ç¼“å­˜æ•°æ®åº“**: Redis 7.2
**æ–‡ä»¶å­˜å‚¨**: Vercel Blob / AWS S3

---

### 2. æ•°æ®è¡¨è®¾è®¡

#### 2.1 ç”¨æˆ·ç›¸å…³è¡¨

**users (ç”¨æˆ·è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | ç”¨æˆ·ID | PRIMARY KEY |
| phone | VARCHAR(20) | æ‰‹æœºå· | UNIQUE, NOT NULL |
| email | VARCHAR(100) | é‚®ç®± | UNIQUE |
| password | VARCHAR(255) | å¯†ç å“ˆå¸Œ | NOT NULL |
| nickname | VARCHAR(50) | æ˜µç§° | NOT NULL |
| avatar | VARCHAR(255) | å¤´åƒURL |  |
| gender | ENUM | æ€§åˆ« (male/female/unknown) | DEFAULT 'unknown' |
| birthday | DATE | ç”Ÿæ—¥ |  |
| real_name | VARCHAR(50) | çœŸå®å§“å |  |
| id_card | VARCHAR(18) | èº«ä»½è¯å· | ENCRYPTED |
| member_level | VARCHAR(20) | ä¼šå‘˜ç­‰çº§ | DEFAULT 'normal' |
| points | INTEGER | ç§¯åˆ† | DEFAULT 0 |
| growth | INTEGER | æˆé•¿å€¼ | DEFAULT 0 |
| balance | DECIMAL(10,2) | ä½™é¢ | DEFAULT 0.00 |
| status | ENUM | çŠ¶æ€ (active/disabled) | DEFAULT 'active' |
| last_login_at | TIMESTAMP | æœ€åç™»å½•æ—¶é—´ |  |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ | DEFAULT NOW() |

**user_addresses (æ”¶è´§åœ°å€è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | åœ°å€ID | PRIMARY KEY |
| user_id | UUID | ç”¨æˆ·ID | FOREIGN KEY |
| name | VARCHAR(50) | æ”¶è´§äººå§“å | NOT NULL |
| phone | VARCHAR(20) | æ‰‹æœºå· | NOT NULL |
| province | VARCHAR(50) | çœä»½ | NOT NULL |
| city | VARCHAR(50) | åŸå¸‚ | NOT NULL |
| district | VARCHAR(50) | åŒºå¿ | NOT NULL |
| detail | VARCHAR(200) | è¯¦ç»†åœ°å€ | NOT NULL |
| postal_code | VARCHAR(10) | é‚®ç¼– |  |
| is_default | BOOLEAN | æ˜¯å¦é»˜è®¤ | DEFAULT false |
| tag | VARCHAR(20) | æ ‡ç­¾ (home/company) |  |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |

**user_auth_bindings (ç¬¬ä¸‰æ–¹è´¦å·ç»‘å®šè¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | ID | PRIMARY KEY |
| user_id | UUID | ç”¨æˆ·ID | FOREIGN KEY |
| auth_type | ENUM | ç±»å‹ (wechat/qq/weibo) | NOT NULL |
| open_id | VARCHAR(100) | OpenID | UNIQUE |
| union_id | VARCHAR(100) | UnionID |  |
| created_at | TIMESTAMP | ç»‘å®šæ—¶é—´ | DEFAULT NOW() |

---

#### 2.2 å•†å“ç›¸å…³è¡¨

**categories (å•†å“åˆ†ç±»è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | åˆ†ç±»ID | PRIMARY KEY |
| name | VARCHAR(50) | åˆ†ç±»åç§° | NOT NULL |
| parent_id | UUID | çˆ¶åˆ†ç±»ID | FOREIGN KEY |
| level | INTEGER | å±‚çº§ | DEFAULT 1 |
| sort | INTEGER | æ’åº | DEFAULT 0 |
| icon | VARCHAR(255) | å›¾æ ‡URL |  |
| image | VARCHAR(255) | åˆ†ç±»å›¾ç‰‡ |  |
| description | TEXT | æè¿° |  |
| is_visible | BOOLEAN | æ˜¯å¦æ˜¾ç¤º | DEFAULT true |
| seo_title | VARCHAR(100) | SEOæ ‡é¢˜ |  |
| seo_keywords | VARCHAR(255) | SEOå…³é”®è¯ |  |
| seo_description | VARCHAR(500) | SEOæè¿° |  |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ | DEFAULT NOW() |

**brands (å“ç‰Œè¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | å“ç‰ŒID | PRIMARY KEY |
| name | VARCHAR(50) | å“ç‰Œåç§° | UNIQUE, NOT NULL |
| logo | VARCHAR(255) | Logo URL |  |
| description | TEXT | å“ç‰Œæè¿° |  |
| story | TEXT | å“ç‰Œæ•…äº‹ |  |
| sort | INTEGER | æ’åº | DEFAULT 0 |
| is_visible | BOOLEAN | æ˜¯å¦æ˜¾ç¤º | DEFAULT true |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |

**products (å•†å“è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | å•†å“ID | PRIMARY KEY |
| name | VARCHAR(200) | å•†å“åç§° | NOT NULL |
| subtitle | VARCHAR(255) | å‰¯æ ‡é¢˜ |  |
| category_id | UUID | åˆ†ç±»ID | FOREIGN KEY |
| brand_id | UUID | å“ç‰ŒID | FOREIGN KEY |
| main_images | JSON | ä¸»å›¾åˆ—è¡¨ |  |
| video_url | VARCHAR(255) | è§†é¢‘URL |  |
| original_price | DECIMAL(10,2) | åŸä»· | NOT NULL |
| selling_price | DECIMAL(10,2) | å”®ä»· | NOT NULL |
| cost_price | DECIMAL(10,2) | æˆæœ¬ä»· |  |
| stock | INTEGER | åº“å­˜ | DEFAULT 0 |
| stock_warning | INTEGER | åº“å­˜é¢„è­¦å€¼ | DEFAULT 10 |
| sales | INTEGER | é”€é‡ | DEFAULT 0 |
| views | INTEGER | æµè§ˆé‡ | DEFAULT 0 |
| favorites | INTEGER | æ”¶è—æ•° | DEFAULT 0 |
| weight | INTEGER | é‡é‡(g) |  |
| limit_per_user | INTEGER | é™è´­æ•°é‡ | DEFAULT 0 |
| description | TEXT | å•†å“æè¿° |  |
| detail_images | JSON | è¯¦æƒ…å›¾åˆ—è¡¨ |  |
| ingredients | TEXT | æˆåˆ†è¡¨ |  |
| usage | TEXT | ä½¿ç”¨æ–¹æ³• |  |
| efficacy | JSON | åŠŸæ•ˆåˆ—è¡¨ |  |
| suitable_for | JSON | é€‚ç”¨äººç¾¤ |  |
| shelf_life | VARCHAR(50) | ä¿è´¨æœŸ |  |
| origin | VARCHAR(100) | äº§åœ° |  |
| certifications | JSON | è®¤è¯è¯ä¹¦ |  |
| tags | JSON | æ ‡ç­¾åˆ—è¡¨ |  |
| is_new | BOOLEAN | æ–°å“æ ‡è¯† | DEFAULT false |
| is_hot | BOOLEAN | çƒ­å–æ ‡è¯† | DEFAULT false |
| is_recommend | BOOLEAN | æ¨èæ ‡è¯† | DEFAULT false |
| status | ENUM | çŠ¶æ€ (draft/online/offline) | DEFAULT 'draft' |
| sort | INTEGER | æ’åº | DEFAULT 0 |
| seo_title | VARCHAR(100) | SEOæ ‡é¢˜ |  |
| seo_keywords | VARCHAR(255) | SEOå…³é”®è¯ |  |
| seo_description | VARCHAR(500) | SEOæè¿° |  |
| show_time | TIMESTAMP | ä¸Šæ¶æ—¶é—´ |  |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ | DEFAULT NOW() |

**product_skus (å•†å“SKUè¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | SKU ID | PRIMARY KEY |
| product_id | UUID | å•†å“ID | FOREIGN KEY |
| sku_code | VARCHAR(50) | SKUç¼–ç  | UNIQUE |
| spec_values | JSON | è§„æ ¼å€¼ {"é¢œè‰²":"è‡ªç„¶è‰²","å®¹é‡":"30ml"} |  |
| price | DECIMAL(10,2) | SKUä»·æ ¼ |  |
| stock | INTEGER | SKUåº“å­˜ | DEFAULT 0 |
| image | VARCHAR(255) | SKUå›¾ç‰‡ |  |
| sort | INTEGER | æ’åº | DEFAULT 0 |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |

---

#### 2.3 è®¢å•ç›¸å…³è¡¨

**orders (è®¢å•è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | è®¢å•ID | PRIMARY KEY |
| order_no | VARCHAR(30) | è®¢å•å· | UNIQUE, NOT NULL |
| user_id | UUID | ç”¨æˆ·ID | FOREIGN KEY |
| total_amount | DECIMAL(10,2) | å•†å“æ€»é¢ | NOT NULL |
| discount_amount | DECIMAL(10,2) | ä¼˜æƒ é‡‘é¢ | DEFAULT 0.00 |
| shipping_fee | DECIMAL(10,2) | è¿è´¹ | DEFAULT 0.00 |
| final_amount | DECIMAL(10,2) | å®ä»˜é‡‘é¢ | NOT NULL |
| payment_method | ENUM | æ”¯ä»˜æ–¹å¼ (wechat/alipay/balance) |  |
| payment_time | TIMESTAMP | æ”¯ä»˜æ—¶é—´ |  |
| receiver_name | VARCHAR(50) | æ”¶è´§äºº | NOT NULL |
| receiver_phone | VARCHAR(20) | æ”¶è´§ç”µè¯ | NOT NULL |
| receiver_province | VARCHAR(50) | çœä»½ | NOT NULL |
| receiver_city | VARCHAR(50) | åŸå¸‚ | NOT NULL |
| receiver_district | VARCHAR(50) | åŒºå¿ | NOT NULL |
| receiver_detail | VARCHAR(200) | è¯¦ç»†åœ°å€ | NOT NULL |
| shipping_method | VARCHAR(50) | é…é€æ–¹å¼ |  |
| shipping_company | VARCHAR(50) | ç‰©æµå…¬å¸ |  |
| shipping_no | VARCHAR(50) | ç‰©æµå•å· |  |
| shipping_time | TIMESTAMP | å‘è´§æ—¶é—´ |  |
| received_time | TIMESTAMP | æ”¶è´§æ—¶é—´ |  |
| invoice_type | ENUM | å‘ç¥¨ç±»å‹ (none/personal/company) | DEFAULT 'none' |
| invoice_info | JSON | å‘ç¥¨ä¿¡æ¯ |  |
| remark | VARCHAR(500) | è®¢å•å¤‡æ³¨ |  |
| coupon_id | UUID | ä¼˜æƒ åˆ¸ID |  |
| points_used | INTEGER | ä½¿ç”¨ç§¯åˆ† | DEFAULT 0 |
| points_earned | INTEGER | è·å¾—ç§¯åˆ† | DEFAULT 0 |
| status | ENUM | è®¢å•çŠ¶æ€ | NOT NULL |
| cancel_reason | VARCHAR(255) | å–æ¶ˆåŸå›  |  |
| cancel_time | TIMESTAMP | å–æ¶ˆæ—¶é—´ |  |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ | DEFAULT NOW() |

**è®¢å•çŠ¶æ€æšä¸¾**ï¼špending_payment, pending_shipment, shipped, completed, canceled, refunding, refunded

**order_items (è®¢å•å•†å“è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | ID | PRIMARY KEY |
| order_id | UUID | è®¢å•ID | FOREIGN KEY |
| product_id | UUID | å•†å“ID | FOREIGN KEY |
| sku_id | UUID | SKU ID |  |
| product_name | VARCHAR(200) | å•†å“åç§° | NOT NULL |
| product_image | VARCHAR(255) | å•†å“å›¾ç‰‡ |  |
| spec_info | VARCHAR(200) | è§„æ ¼ä¿¡æ¯ |  |
| price | DECIMAL(10,2) | å•ä»· | NOT NULL |
| quantity | INTEGER | æ•°é‡ | NOT NULL |
| subtotal | DECIMAL(10,2) | å°è®¡ | NOT NULL |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |

**order_refunds (é€€æ¬¾/å”®åè¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | å”®åID | PRIMARY KEY |
| refund_no | VARCHAR(30) | å”®åå•å· | UNIQUE |
| order_id | UUID | è®¢å•ID | FOREIGN KEY |
| user_id | UUID | ç”¨æˆ·ID | FOREIGN KEY |
| type | ENUM | ç±»å‹ (refund_only/return_refund) | NOT NULL |
| reason | VARCHAR(255) | ç”³è¯·åŸå›  | NOT NULL |
| description | TEXT | è¯¦ç»†è¯´æ˜ |  |
| images | JSON | å‡­è¯å›¾ç‰‡ |  |
| refund_amount | DECIMAL(10,2) | é€€æ¬¾é‡‘é¢ | NOT NULL |
| status | ENUM | çŠ¶æ€ (pending/approved/rejected/completed) | DEFAULT 'pending' |
| admin_remark | VARCHAR(500) | å¤„ç†å¤‡æ³¨ |  |
| processed_at | TIMESTAMP | å¤„ç†æ—¶é—´ |  |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |

---

#### 2.4 è¥é”€ç›¸å…³è¡¨

**coupons (ä¼˜æƒ åˆ¸è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | ä¼˜æƒ åˆ¸ID | PRIMARY KEY |
| name | VARCHAR(100) | ä¼˜æƒ åˆ¸åç§° | NOT NULL |
| type | ENUM | ç±»å‹ (discount/cash/shipping) | NOT NULL |
| discount_rate | DECIMAL(3,2) | æŠ˜æ‰£ç‡ (0.8=8æŠ˜) |  |
| discount_amount | DECIMAL(10,2) | å‡å…é‡‘é¢ |  |
| condition_amount | DECIMAL(10,2) | ä½¿ç”¨æ¡ä»¶é‡‘é¢ |  |
| total_quantity | INTEGER | å‘è¡Œæ€»é‡ | DEFAULT 0 |
| received_quantity | INTEGER | å·²é¢†å–æ•°é‡ | DEFAULT 0 |
| used_quantity | INTEGER | å·²ä½¿ç”¨æ•°é‡ | DEFAULT 0 |
| limit_per_user | INTEGER | æ¯äººé™é¢†æ•°é‡ | DEFAULT 1 |
| limit_categories | JSON | é™å®šå“ç±» |  |
| limit_products | JSON | é™å®šå•†å“ |  |
| start_time | TIMESTAMP | ç”Ÿæ•ˆæ—¶é—´ | NOT NULL |
| end_time | TIMESTAMP | å¤±æ•ˆæ—¶é—´ | NOT NULL |
| status | ENUM | çŠ¶æ€ (active/inactive) | DEFAULT 'active' |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |

**user_coupons (ç”¨æˆ·ä¼˜æƒ åˆ¸è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | ID | PRIMARY KEY |
| user_id | UUID | ç”¨æˆ·ID | FOREIGN KEY |
| coupon_id | UUID | ä¼˜æƒ åˆ¸ID | FOREIGN KEY |
| status | ENUM | çŠ¶æ€ (available/used/expired) | DEFAULT 'available' |
| used_time | TIMESTAMP | ä½¿ç”¨æ—¶é—´ |  |
| order_id | UUID | è®¢å•ID |  |
| received_at | TIMESTAMP | é¢†å–æ—¶é—´ | DEFAULT NOW() |

**points_logs (ç§¯åˆ†è®°å½•è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | ID | PRIMARY KEY |
| user_id | UUID | ç”¨æˆ·ID | FOREIGN KEY |
| type | ENUM | ç±»å‹ (earn/spend) | NOT NULL |
| points | INTEGER | ç§¯åˆ†æ•°é‡ | NOT NULL |
| reason | VARCHAR(100) | åŸå›  | NOT NULL |
| related_id | UUID | å…³è”ID (è®¢å•IDç­‰) |  |
| balance | INTEGER | ç§¯åˆ†ä½™é¢ |  |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |

---

#### 2.5 å†…å®¹ç›¸å…³è¡¨

**articles (æ–‡ç« è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | æ–‡ç« ID | PRIMARY KEY |
| title | VARCHAR(200) | æ ‡é¢˜ | NOT NULL |
| subtitle | VARCHAR(255) | å‰¯æ ‡é¢˜ |  |
| cover | VARCHAR(255) | å°é¢å›¾ |  |
| category | ENUM | åˆ†ç±» | NOT NULL |
| tags | JSON | æ ‡ç­¾åˆ—è¡¨ |  |
| author_id | UUID | ä½œè€…ID |  |
| content | TEXT | æ–‡ç« å†…å®¹ | NOT NULL |
| related_products | JSON | å…³è”å•†å“IDåˆ—è¡¨ |  |
| view_count | INTEGER | æµè§ˆé‡ | DEFAULT 0 |
| like_count | INTEGER | ç‚¹èµæ•° | DEFAULT 0 |
| comment_count | INTEGER | è¯„è®ºæ•° | DEFAULT 0 |
| is_published | BOOLEAN | æ˜¯å¦å‘å¸ƒ | DEFAULT false |
| published_at | TIMESTAMP | å‘å¸ƒæ—¶é—´ |  |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |
| updated_at | TIMESTAMP | æ›´æ–°æ—¶é—´ | DEFAULT NOW() |

**reviews (å•†å“è¯„ä»·è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | è¯„ä»·ID | PRIMARY KEY |
| order_id | UUID | è®¢å•ID | FOREIGN KEY |
| product_id | UUID | å•†å“ID | FOREIGN KEY |
| user_id | UUID | ç”¨æˆ·ID | FOREIGN KEY |
| rating | INTEGER | è¯„åˆ† (1-5) | NOT NULL |
| content | TEXT | è¯„ä»·å†…å®¹ | NOT NULL |
| images | JSON | æ™’å•å›¾ç‰‡ |  |
| is_anonymous | BOOLEAN | æ˜¯å¦åŒ¿å | DEFAULT false |
| is_verified | BOOLEAN | æ˜¯å¦è®¤è¯è´­ä¹° | DEFAULT true |
| like_count | INTEGER | ç‚¹èµæ•° | DEFAULT 0 |
| reply | TEXT | å•†å®¶å›å¤ |  |
| reply_time | TIMESTAMP | å›å¤æ—¶é—´ |  |
| status | ENUM | çŠ¶æ€ (pending/approved/rejected) | DEFAULT 'pending' |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |

**comments (è¯„è®ºè¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | è¯„è®ºID | PRIMARY KEY |
| article_id | UUID | æ–‡ç« ID | FOREIGN KEY |
| user_id | UUID | ç”¨æˆ·ID | FOREIGN KEY |
| parent_id | UUID | çˆ¶è¯„è®ºID |  |
| content | TEXT | è¯„è®ºå†…å®¹ | NOT NULL |
| like_count | INTEGER | ç‚¹èµæ•° | DEFAULT 0 |
| status | ENUM | çŠ¶æ€ (approved/rejected) | DEFAULT 'approved' |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |

---

#### 2.6 ç³»ç»Ÿç›¸å…³è¡¨

**admins (ç®¡ç†å‘˜è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | ç®¡ç†å‘˜ID | PRIMARY KEY |
| username | VARCHAR(50) | ç”¨æˆ·å | UNIQUE, NOT NULL |
| password | VARCHAR(255) | å¯†ç å“ˆå¸Œ | NOT NULL |
| real_name | VARCHAR(50) | çœŸå®å§“å | NOT NULL |
| phone | VARCHAR(20) | æ‰‹æœºå· |  |
| email | VARCHAR(100) | é‚®ç®± |  |
| avatar | VARCHAR(255) | å¤´åƒ |  |
| role_id | UUID | è§’è‰²ID | FOREIGN KEY |
| status | ENUM | çŠ¶æ€ (active/disabled) | DEFAULT 'active' |
| last_login_at | TIMESTAMP | æœ€åç™»å½• |  |
| last_login_ip | VARCHAR(50) | ç™»å½•IP |  |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |

**roles (è§’è‰²è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | è§’è‰²ID | PRIMARY KEY |
| name | VARCHAR(50) | è§’è‰²åç§° | UNIQUE, NOT NULL |
| description | VARCHAR(255) | è§’è‰²æè¿° |  |
| permissions | JSON | æƒé™åˆ—è¡¨ | NOT NULL |
| created_at | TIMESTAMP | åˆ›å»ºæ—¶é—´ | DEFAULT NOW() |

**operation_logs (æ“ä½œæ—¥å¿—è¡¨)**

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | çº¦æŸ |
|------|------|------|------|
| id | UUID | æ—¥å¿—ID | PRIMARY KEY |
| admin_id | UUID | æ“ä½œäººID | FOREIGN KEY |
| module | VARCHAR(50) | æ“ä½œæ¨¡å— | NOT NULL |
| action | VARCHAR(50) | æ“ä½œç±»å‹ | NOT NULL |
| content | TEXT | æ“ä½œå†…å®¹ |  |
| ip | VARCHAR(50) | IPåœ°å€ |  |
| user_agent | VARCHAR(255) | User Agent |  |
| created_at | TIMESTAMP | æ“ä½œæ—¶é—´ | DEFAULT NOW() |

---

### 3. ç´¢å¼•è®¾è®¡

```sql
-- ç”¨æˆ·è¡¨ç´¢å¼•
CREATE INDEX idx_users_phone ON users(phone);
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_created_at ON users(created_at);

-- å•†å“è¡¨ç´¢å¼•
CREATE INDEX idx_products_category_id ON products(category_id);
CREATE INDEX idx_products_brand_id ON products(brand_id);
CREATE INDEX idx_products_status ON products(status);
CREATE INDEX idx_products_selling_price ON products(selling_price);
CREATE INDEX idx_products_sales ON products(sales DESC);
CREATE INDEX idx_products_created_at ON products(created_at DESC);

-- è®¢å•è¡¨ç´¢å¼•
CREATE INDEX idx_orders_user_id ON orders(user_id);
CREATE INDEX idx_orders_order_no ON orders(order_no);
CREATE INDEX idx_orders_status ON orders(status);
CREATE INDEX idx_orders_created_at ON orders(created_at DESC);
CREATE INDEX idx_orders_payment_time ON orders(payment_time DESC);

-- è¯„ä»·è¡¨ç´¢å¼•
CREATE INDEX idx_reviews_product_id ON reviews(product_id);
CREATE INDEX idx_reviews_user_id ON reviews(user_id);
CREATE INDEX idx_reviews_created_at ON reviews(created_at DESC);
```

---

*æ–‡æ¡£ç‰ˆæœ¬ï¼šv1.0*
*ä¸‹ä¸€éƒ¨åˆ†ï¼šAPIæ¥å£æ–‡æ¡£*
